\documentclass{llncs}
  \pdfpagewidth=8.5truein
  \pdfpageheight=11truein

\usepackage{graphicx,url} 
\usepackage{tikz}
\usepackage{times}
%\usepackage[dvips]{graphicx}
\usepackage{alltt} 
\usepackage{amsmath}
\usepackage{latexsym}
\usepackage{listings}

%%%%% OUR MACROS
\newcommand{\sem}[1]{[ \! [ #1 ] \! ]}
\newcommand{\guard}[1]{[ #1 ]}
\newcommand{\tuple}[1]{\langle #1 \rangle}
\newcommand{\trad}[1]{{\cal T}\sem{ #1 }}
\newcommand{\setof}[1]{\{ #1 \} }
\newcommand{\eval}[2]{\mathit{Eval}_{#1}(#2)}

\newcommand{\expressionsTransitionRule}[6]{$$\mathit{s#1}, \mathit{b#2} \vdash \mathit{#3} \Downarrow  \mathit{s#4}, \mathit{b#5}, \mathit{v#6}\qquad$$}
\newcommand{\commandsTransitionRule}[5] {$$\mathit{s#1},\mathit{b#2} \vdash \mathit{#3} \Downarrow \mathit{s#4}, \mathit{b#5}$$}






\def\tr{\rhd}    % transition relation

\newcommand{\fpfrule}[2]{{{{\displaystyle #1}\over{\displaystyle #2}}}}
\newcommand{\pfrule}[2]{\begin{array}{c} #1 \\ \hline #2 \end{array}}
\newcommand{\pfruleN}[3]{\begin{array}{c} #1 \\ \hline #3 \end{array} \ (#2)}
%\newcommand{\pfrule}[2]{\begin{array}{c} #1 \\[-0.5em] \hline #2 \end{array}}

\newcommand{\rulegap}{\qquad}

\newcommand{\alberto}[1]{\marginpar{\textcolor{magenta}{\textbf{Alberto: }#1}}}
\newcommand{\ialberto}[1]{\textcolor{blue}{\textbf{Alberto: }#1}}

\newcommand{\dan}[1]{\textcolor{red}{#1}}
\newcommand{\idaniel}[1]{\textcolor{red}{\textbf{Daniel: }#1}}

\def\vertices{{\cal V}}
\def\crossDD{\mathsf{crossDD}}
\newcommand{\comentario}[1]{}

\lstset{numbers=right, numbersep=5pt, numberstyle=\tiny, stepnumber=1,escapechar=\!,columns=fullflexible,
        morekeywords={procedure,let,for,do,if,then,else,add,choose,end,while,true,false,rise,exception,extend,resume,to}}

\def\pews{$\mu$BP}
\def\PEWSAM{BP-AM}
\begin{document}

\begin{itemize}
  \item First Step: Define the semantic domains
  \item Second Step: Define Big Step semantics
\end{itemize}




\section{Semantic Domain - \textit{Python}}



\setlength{\parindent}{0cm}
Expressions' transitions rules:
% $$s, b \vdash exp \Downarrow  s', b', v'$$
\expressionsTransitionRule{}{}{exp}{'}{'}{}


Commands' transition rule:
\commandsTransitionRule{}{}{C}{'}{'}








Bindings: $$(identifier \mapsto cell) \cup (identifier \mapsto closure).$$
Store: $$cell \mapsto value$$
$$value = string\_literal \cup num\_literal \cup bool\_literal \cup list$$
\newpage



Regras de atribui\c{c}\~ao
\vspace{20 mm}


Atribui\c{c}\~ao de Elemento n\~ao lista e que n\~ao exista nos bindings:
$$
\textit{(list-attrib-1)}
\pfrule
{\expressionsTransitionRule{}{}{exp}{'}{'}{}}
{\commandsTransitionRule{}{}{ \mathit{identifier} =  \mathit{exp}}{'}{'[identifier \mapsto v]}}
{identifier \not \in dom(b) , v \not \in list}
$$

Atribui\c{c}\~ao de Elemento n\~ao lista e que exista nos bindings:
$$
\textit{(list-attrib-2)}
\pfrule
{\expressionsTransitionRule{}{}{exp}{'}{'}{}}
{\commandsTransitionRule{}{}{ \mathit{identifier} =  \mathit{exp}}{'}{'[b(identifier) \mapsto v]}}
{identifier \in dom(b) , v \not \in list}
$$

Atribui\c{c}\~ao de Elemento lista e que n\~ao exista nos bindings:
$$
\textit{(list-attrib-3)}
\pfrule
{\expressionsTransitionRule{}{}{exp}{'}{'}{}
k:= alloc(s',v)
}
{\commandsTransitionRule{}{}{ \mathit{identifier} =  \mathit{exp}}{'[k\mapsto v]}{'[identifier \mapsto v]}}
{identifier \not \in dom(b) , v \in list}
$$

Atribui\c{c}\~ao de Elemento lis\~aa e que exista nos bindings:
$$
\textit{(list-attrib-4)}
\pfrule
{\expressionsTransitionRule{}{}{exp}{'}{'}{}
}
{
\commandsTransitionRule
{}
{}
{ \mathit{identifier} =  \mathit{exp}}
{'[b'(identifier) \mapsto v]}
{'}

}
{identifier \in dom(b) , v \in list}
$$

\vspace{10 mm}
\line(3,0){400}
\vspace{10 mm}

Atribui\c{c}\~ao em listas:


$$
\textit{(list-attrib)}
\pfrule
{
\expressionsTransitionRule{}{}{exp1}{'}{'}{K}
\expressionsTransitionRule{'}{'}{exp2}{''}{''}{I}
\\[1mm]
\expressionsTransitionRule{''}{''}{exp3}{'''}{'''}{V} 
update(s'''(vK),vI,vV) = l 
}
{
\commandsTransitionRule{}{}{ \mathit{exp1} \mathit{[exp2]} = \mathit{exp3} }{'''[k \mapsto l]}{'''}
}
{}
$$







\newpage

Regras de desvio condicional:



$$
\textit{(if-true)}
\pfrule
{
\expressionsTransitionRule{}{}{exp}{'}{'}{'} 
\commandsTransitionRule{'}{'}{\mathit{C1}}{''}{''}
}
{
\commandsTransitionRule{}{}{\mathit{if} \mathit{exp:} \mathit{C1} \mathit{else:} \mathit{C2}}{''}{''}
}
\textit{$ v' = True $}
$$



$$
\textit{(if-false)}
\pfrule
{
\expressionsTransitionRule{}{}{exp}{'}{'}{'} 
\commandsTransitionRule{'}{'}{\mathit{C2}}{''}{''}
}
{
\commandsTransitionRule{}{}{\mathit{if} \mathit{exp:} \mathit{C1} \mathit{else:} \mathit{C2}}{''}{''}
}
\textit{$ v' = False $}
$$




For loop

\newcommand{\forRuleA}{$$\mathit{s, b, [], i} \vdash C \Downarrow s, b\qquad$$}
\newcommand{\forRuleB}{$$\mathit{s, b[i \mapsto v]} \vdash C \Downarrow s', b'\qquad$$}
\newcommand{\forRuleC}{$$\mathit{s', b', l, i} \vdash C \Downarrow s'', b''\qquad$$}


Transition rules for $\mathit{for}$ clause:
\forRuleA
\forRuleB
\forRuleC



$$
\textit{(for-loop)}
\pfrule
{
\expressionsTransitionRule{}{}{exp}{'}{'}{} 
\forRuleB
\forRuleC
% $\mathit{s', b', l, i} \vdash C \Downarrow s'', b''$
}
{\commandsTransitionRule{'}{'}{\mathit{for} \mathit{identifier} \mathit{in}  \mathit{exp:} \mathit{C}}{''}{''}
}
\textit{$v \in list$}
$$







\newpage

$$
\textit{ (string-add) }
\pfrule
{\expressionsTransitionRule{}{}{exp1}{'}{'}{'} 
% \\[1mm]
 \expressionsTransitionRule{'}{'}{exp2}{''}{''}{''}
}
{\expressionsTransitionRule{''}{''}{exp1 + exp2}{'''}{'''}{'''} }
\textit{$v''' = v' . v''$}
$$

$$
\textit{(access-list)}
\pfrule
{\expressionsTransitionRule{}{}{exp1}{'}{'}{L}
 \expressionsTransitionRule{'}{'}{exp2}{''}{''}{I}
}
{\expressionsTransitionRule{}{}{exp1[exp2]}{'''}{'''}{}}
{\textit{$vL \in list$}}
$$





\newpage
% \paragraph{Esquema da m√°quina:}

% $$\tuple{G, \rho, I, O, M, T_E, N_{MT}} \ \tr\ \tuple{G', \rho', I', O', M', T'_E, N'_{MT}}$$




% \paragraph{Operation Call:}

$$
\pfrule{
\mathit{indegree}(w) = 0 \qquad 
\overline{a} = \eval{\rho}{\overline{E}} \qquad
A'_c = A_c - \setof{w\mapsto v \ | \ v \in V} \qquad
A'_d = A_d - \setof{w\mapsto v \ | \ v \in V} \\[1mm]
G = \tuple{V[w:S!\overline{E}, \, w' : S?\overline{X}], A_c[w \mapsto w'], A_d} \qquad
G' = \tuple{V[w' : S?\overline{X}], A'_c, A'_d}
}{
\tuple{G,\rho, I, O, M, T_E, N_{MT}}
\; \tr \;
\tuple{G',\rho, I, O[\tuple{S, w', \overline{a}}], M[\tuple{w:S!\overline{E}, \, w', \mathit{now()}, N_{MT}}], T_E, N_{MT}}
}
$$

\end{document}
